<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>(역삼) 경조사 지원 신청</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; font-weight: bold; margin-bottom: 5px; }
        input[type="text"] { width: 100%; padding: 8px; box-sizing: border-box; }
        .button-group { display: flex; gap: 10px; margin-top: 20px; }
        button {
            padding: 8px 10px; cursor: pointer; font-weight: bold;
            line-height: 1.2; text-align: center; min-width: 80px;
        }
        #postcode, #address { margin-bottom: 5px; }
        .form-group > div { display: flex; gap: 20px; align-items: center; }
        .section { display: none; }
        .section-visible { display: block; }
        input[type="datetime-local"] { width: 100%; padding: 8px; box-sizing: border-box; }
    </style>
</head>
<body>

    <h1>[역삼] 경조사 지원 신청</h1>
    <p>안녕하세요. 총무팀입니다.<br>빠른 경조사 지원을 위하여 아래 내용 응답 부탁드립니다.</p>

    <div id="section1" class="section-visible">
        <div class="form-group">
            <label for="employee-id">1. 사번을 입력해주세요. (mk~ 형식)</label>
            <input type="text" id="employee-id" name="employee-id" placeholder="mk6729" required>
        </div>
        <div class="form-group">
            <label>2. 구분</label>
            <div>
                <input type="radio" id="kyungsa" name="division" value="경사" required>
                <label for="kyungsa">경사</label>
                <input type="radio" id="josa" name="division" value="조사" required>
                <label for="josa">조사</label>
            </div>
        </div>
        <div class="button-group">
            <button onclick="goToNextSection()">다음</button>
        </div>
    </div>

    <div id="section2" class="section">
        <div class="form-group">
            <label>1. 경사 유형을 선택해주세요.</label>
            <div>
                <input type="radio" id="marriage_self" name="kyungsa-type" value="본인 결혼" required>
                <label for="marriage_self">본인 결혼</label>
            </div>
            <div>
                <input type="radio" id="marriage_child" name="kyungsa-type" value="자녀 결혼" required>
                <label for="marriage_child">자녀 결혼</label>
            </div>
            <div>
                <input type="radio" id="birth_self" name="kyungsa-type" value="본인 출산" required>
                <label for="birth_self">본인 출산</label>
            </div>
            <div>
                <input type="radio" id="birth_spouse" name="kyungsa-type" value="배우자 출산" required>
                <label for="birth_spouse">배우자 출산</label>
            </div>
        </div>
        <div class="form-group">
            <label for="event-date">2. 발생일 (예식/출생 날짜 및 시간)</label>
            <input type="datetime-local" id="event-date" name="event-date" required>
        </div>
        <div class="form-group">
            <label>3. 공지 여부</label>
            <div>
                <input type="radio" id="announce_yes" name="announce" value="O" required>
                <label for="announce_yes">O</label>
            </div>
            <div>
                <input type="radio" id="announce_no" name="announce" value="X" required>
                <label for="announce_no">X</label>
            </div>
        </div>
        <div class="form-group">
            <label>4. 화환 배송 여부 (출산 시 해당 없음)</label>
            <div>
                <input type="radio" id="wreath_yes" name="wreath" value="O" required>
                <label for="wreath_yes">O</label>
            </div>
            <div>
                <input type="radio" id="wreath_no" name="wreath" value="X" required>
                <label for="wreath_no">X</label>
            </div>
        </div>
        <div class="form-group">
            <label for="name">5. 이름을 입력해주세요.</label>
            <input type="text" id="name" name="name" required>
        </div>
        <div class="form-group">
            <label>6. 배송 주소 (홀 이름까지 최대한 상세히 기재)</label>
            <div style="display: flex; gap: 5px;">
                <input type="text" id="postcode" placeholder="우편번호" readonly required>
                <button onclick="execDaumPostcode()">우편번호<br>찾기</button>
            </div>
            <input type="text" id="address" placeholder="주소" readonly required>
            <input type="text" id="detailAddress" placeholder="상세주소 입력" required>
        </div>
        <div class="form-group">
            <label for="phone">7. 연락처를 입력해주세요. (010-0000-0000)</label>
            <input type="text" id="phone" name="phone" required>
        </div>
        <div class="form-group">
            <label for="notes">8. 기타 요청사항</label>
            <textarea id="notes" name="notes" rows="4"></textarea>
        </div>
        <div class="button-group">
            <button onclick="goToPreviousSection()">뒤로</button>
            <button onclick="submitForm()">제출</button>
        </div>
    </div>
    
    <div id="section3" class="section">
        <div class="form-group">
            <label for="name-josa">1. 이름을 입력해주세요.</label>
            <input type="text" id="name-josa" name="name" required>
        </div>
        <div class="form-group">
            <label for="event-josa">2. 발생일</label>
            <input type="datetime-local" id="event-josa" name="event-josa" required>
        </div>
        <div class="form-group">
            <label for="phone-josa">3. 연락처를 입력해주세요.</label>
            <input type="text" id="phone-josa" name="phone" required>
        </div>
        <div class="form-group">
            <label>4. 배송 주소 (홀 이름까지 최대한 상세히 기재)</label>
            <div style="display: flex; gap: 5px;">
                <input type="text" id="postcode-josa" placeholder="우편번호" readonly required>
                <button onclick="execDaumPostcodeJosa()">우편번호<br>찾기</button>
            </div>
            <input type="text" id="address-josa" placeholder="주소" readonly required>
            <input type="text" id="detailAddress-josa" placeholder="상세주소 입력" required>
        </div>
        <div class="form-group">
            <label for="notes-josa">5. 기타 요청사항</label>
            <textarea id="notes-josa" name="notes-josa" rows="4"></textarea>
        </div>
        <div class="button-group">
            <button onclick="goToPreviousSection()">뒤로</button>
            <button onclick="submitForm()">제출</button>
        </div>
    </div>

    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script>
        function goToNextSection() {
            const employeeId = document.getElementById('employee-id').value;
            const division = document.querySelector('input[name="division"]:checked');
            if (!employeeId || !division) {
                alert('사번과 구분을 입력해 주세요.');
                return;
            }

            document.getElementById('section1').classList.remove('section-visible');
            if (division.value === '경사') {
                document.getElementById('section2').classList.add('section-visible');
            } else if (division.value === '조사') {
                document.getElementById('section3').classList.add('section-visible');
            }
        }
        
        function goToPreviousSection() {
            document.getElementById('section1').classList.add('section-visible');
            document.getElementById('section2').classList.remove('section-visible');
            document.getElementById('section3').classList.remove('section-visible');
        }

        function execDaumPostcode() {
            new daum.Postcode({
                oncomplete: function(data) {
                    var addr = data.userSelectedType === 'R' ? data.roadAddress : data.jibunAddress;
                    document.getElementById('postcode').value = data.zonecode;
                    document.getElementById("address").value = addr;
                    document.getElementById("detailAddress").focus();
                }
            }).open();
        }

        function execDaumPostcodeJosa() {
            new daum.Postcode({
                oncomplete: function(data) {
                    var addr = data.userSelectedType === 'R' ? data.roadAddress : data.jibunAddress;
                    document.getElementById('postcode-josa').value = data.zonecode;
                    document.getElementById("address-josa").value = addr;
                    document.getElementById("detailAddress-josa").focus();
                }
            }).open();
        }

        function submitForm() {
            const division = document.querySelector('input[name="division"]:checked').value;
            let data = {
                employeeId: document.getElementById('employee-id').value,
                division: division,
                name: '',
                event: '',
                phone: '',
                postcode: '',
                address: '',
                detailAddress: '',
                notes: ''
            };

            if (division === '경사') {
                data.name = document.getElementById('name').value;
                data.event = document.querySelector('input[name="kyungsa-type"]:checked').value;
                data.phone = document.getElementById('phone').value;
                data.postcode = document.getElementById('postcode').value;
                data.address = document.getElementById('address').value;
                data.detailAddress = document.getElementById('detailAddress').value;
                data.wreath = document.querySelector('input[name="wreath"]:checked').value;
                data.announce = document.querySelector('input[name="announce"]:checked').value;
                data.eventDate = document.getElementById('event-date').value;
                data.notes = document.getElementById('notes').value;
            } else if (division === '조사') {
                data.name = document.getElementById('name-josa').value;
                data.phone = document.getElementById('phone-josa').value;
                data.postcode = document.getElementById('postcode-josa').value;
                data.address = document.getElementById('address-josa').value;
                data.detailAddress = document.getElementById('detailAddress-josa').value;
                data.event = '조사';
                data.eventDate = document.getElementById('event-josa').value;
                data.notes = document.getElementById('notes-josa').value;
            }

            // 여기에 데이터를 서버로 전송하는 로직을 추가합니다.
            // 예를 들어 Google Apps Script 웹 앱 URL을 사용하는 fetch() 함수를 넣습니다.
            console.log(data); // 데이터가 올바르게 수집되었는지 확인하는 용도
            alert('데이터가 성공적으로 수집되었습니다. 콘솔을 확인해 주세요.');
        }
    </script>
</body>
</html>
